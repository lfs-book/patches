Submitted By:            Randy McMurchy <randy_at_linuxfromscratch_dot_org>
Date:                    2005-08-11
Initial Package Version: 2.6.20
Upstream Status:         Not submitted
Origin:                  Randy McMurchy
Description:             Remove building the non-Linux testing programs so that
                         the package will compile if using Glibc-2.3.5


diff -Naur libxml2-2.6.20-orig/Makefile.in libxml2-2.6.20/Makefile.in
--- libxml2-2.6.20-orig/Makefile.in	2005-07-10 22:53:22.000000000 +0000
+++ libxml2-2.6.20/Makefile.in	2005-08-13 01:16:24.000000000 +0000
@@ -17,7 +17,7 @@
 
 
 
-SOURCES = $(libxml2_la_SOURCES) $(testdso_la_SOURCES) $(runsuite_SOURCES) $(runtest_SOURCES) $(testAutomata_SOURCES) $(testC14N_SOURCES) $(testHTML_SOURCES) $(testModule_SOURCES) $(testReader_SOURCES) $(testRegexp_SOURCES) $(testRelax_SOURCES) $(testSAX_SOURCES) $(testSchemas_SOURCES) $(testThreads_SOURCES) $(testURI_SOURCES) $(testXPath_SOURCES) $(testapi_SOURCES) $(xmlcatalog_SOURCES) $(xmllint_SOURCES)
+SOURCES = $(libxml2_la_SOURCES) $(testdso_la_SOURCES) $(testAutomata_SOURCES) $(testC14N_SOURCES) $(testHTML_SOURCES) $(testModule_SOURCES) $(testReader_SOURCES) $(testRegexp_SOURCES) $(testRelax_SOURCES) $(testSAX_SOURCES) $(testSchemas_SOURCES) $(testThreads_SOURCES) $(testURI_SOURCES) $(testXPath_SOURCES) $(testapi_SOURCES) $(xmlcatalog_SOURCES) $(xmllint_SOURCES)
 
 srcdir = @srcdir@
 top_srcdir = @top_srcdir@
@@ -45,8 +45,7 @@
 	testSAX$(EXEEXT) testHTML$(EXEEXT) testXPath$(EXEEXT) \
 	testURI$(EXEEXT) testThreads$(EXEEXT) testC14N$(EXEEXT) \
 	testAutomata$(EXEEXT) testRegexp$(EXEEXT) testReader$(EXEEXT) \
-	testapi$(EXEEXT) testModule$(EXEEXT) runtest$(EXEEXT) \
-	runsuite$(EXEEXT)
+	testapi$(EXEEXT) testModule$(EXEEXT)
 bin_PROGRAMS = xmllint$(EXEEXT) xmlcatalog$(EXEEXT)
 DIST_COMMON = README $(am__configure_deps) $(srcdir)/Makefile.am \
 	$(srcdir)/Makefile.in $(srcdir)/config.h.in \
@@ -126,11 +125,7 @@
 testdso_la_OBJECTS = $(am_testdso_la_OBJECTS)
 binPROGRAMS_INSTALL = $(INSTALL_PROGRAM)
 PROGRAMS = $(bin_PROGRAMS) $(noinst_PROGRAMS)
-am_runsuite_OBJECTS = runsuite.$(OBJEXT)
-runsuite_OBJECTS = $(am_runsuite_OBJECTS)
 am__DEPENDENCIES_2 = $(top_builddir)/libxml2.la $(am__DEPENDENCIES_1)
-am_runtest_OBJECTS = runtest.$(OBJEXT)
-runtest_OBJECTS = $(am_runtest_OBJECTS)
 am_testAutomata_OBJECTS = testAutomata.$(OBJEXT)
 testAutomata_OBJECTS = $(am_testAutomata_OBJECTS)
 am_testC14N_OBJECTS = testC14N.$(OBJEXT)
@@ -175,14 +170,14 @@
 LINK = $(LIBTOOL) --mode=link --tag=CC $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
 	$(AM_LDFLAGS) $(LDFLAGS) -o $@
 SOURCES = $(libxml2_la_SOURCES) $(testdso_la_SOURCES) \
-	$(runsuite_SOURCES) $(runtest_SOURCES) $(testAutomata_SOURCES) \
+	$(testAutomata_SOURCES) \
 	$(testC14N_SOURCES) $(testHTML_SOURCES) $(testModule_SOURCES) \
 	$(testReader_SOURCES) $(testRegexp_SOURCES) \
 	$(testRelax_SOURCES) $(testSAX_SOURCES) $(testSchemas_SOURCES) \
 	$(testThreads_SOURCES) $(testURI_SOURCES) $(testXPath_SOURCES) \
 	$(testapi_SOURCES) $(xmlcatalog_SOURCES) $(xmllint_SOURCES)
 DIST_SOURCES = $(am__libxml2_la_SOURCES_DIST) $(testdso_la_SOURCES) \
-	$(runsuite_SOURCES) $(runtest_SOURCES) $(testAutomata_SOURCES) \
+	$(testAutomata_SOURCES) \
 	$(testC14N_SOURCES) $(testHTML_SOURCES) $(testModule_SOURCES) \
 	$(testReader_SOURCES) $(testRegexp_SOURCES) \
 	$(testRelax_SOURCES) $(testSAX_SOURCES) $(testSchemas_SOURCES) \
@@ -454,14 +449,6 @@
 man_MANS = xml2-config.1 libxml.3
 m4datadir = $(datadir)/aclocal
 m4data_DATA = libxml.m4
-runtest_SOURCES = runtest.c
-runtest_LDFLAGS = 
-runtest_DEPENDENCIES = $(DEPS)
-runtest_LDADD = @BASE_THREAD_LIBS@ @RDL_LIBS@ $(LDADDS)
-runsuite_SOURCES = runsuite.c
-runsuite_LDFLAGS = 
-runsuite_DEPENDENCIES = $(DEPS)
-runsuite_LDADD = @RDL_LIBS@ $(LDADDS)
 xmllint_SOURCES = xmllint.c
 xmllint_LDFLAGS = 
 xmllint_DEPENDENCIES = $(DEPS)
@@ -689,12 +676,6 @@
 	  echo " rm -f $$p $$f"; \
 	  rm -f $$p $$f ; \
 	done
-runsuite$(EXEEXT): $(runsuite_OBJECTS) $(runsuite_DEPENDENCIES) 
-	@rm -f runsuite$(EXEEXT)
-	$(LINK) $(runsuite_LDFLAGS) $(runsuite_OBJECTS) $(runsuite_LDADD) $(LIBS)
-runtest$(EXEEXT): $(runtest_OBJECTS) $(runtest_DEPENDENCIES) 
-	@rm -f runtest$(EXEEXT)
-	$(LINK) $(runtest_LDFLAGS) $(runtest_OBJECTS) $(runtest_LDADD) $(LIBS)
 testAutomata$(EXEEXT): $(testAutomata_OBJECTS) $(testAutomata_DEPENDENCIES) 
 	@rm -f testAutomata$(EXEEXT)
 	$(LINK) $(testAutomata_LDFLAGS) $(testAutomata_OBJECTS) $(testAutomata_LDADD) $(LIBS)
@@ -789,8 +770,6 @@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/parserInternals.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/pattern.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/relaxng.Plo@am__quote@
-@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/runsuite.Po@am__quote@
-@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/runtest.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/testAutomata.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/testC14N.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/testHTML.Po@am__quote@
@@ -2325,7 +2304,7 @@
 dist-test: distdir
 	(mkdir -p $(distdir))
 	(cd $(srcdir) ; tar -cf - --exclude CVS xstc/Tests) | (cd $(distdir); tar xf -)
-	tar -cf - $(distdir)/test $(distdir)/result $(distdir)/xstc/Tests  $(distdir)/Makefile.tests $(distdir)/README $(distdir)/README.tests $(distdir)/AUTHORS $(distdir)/testapi.c $(distdir)/runtest.c $(distdir)/runsuite.c | GZIP=$(GZIP_ENV) gzip -c >`echo "$(distdir)" | sed "s+libxml2+libxml2-tests+"`.tar.gz
+	tar -cf - $(distdir)/test $(distdir)/result $(distdir)/xstc/Tests  $(distdir)/Makefile.tests $(distdir)/README $(distdir)/README.tests $(distdir)/AUTHORS $(distdir)/testapi.c | GZIP=$(GZIP_ENV) gzip -c >`echo "$(distdir)" | sed "s+libxml2+libxml2-tests+"`.tar.gz
 	@(rm -rf $(distdir)/xstc/Test)
 
 cleantar:
